# 架构真经：互联网技术架构的设计原则

## 主旨

这本书的英文名是scalability rules，但这里的scalability比狭义的可扩展性含义更广泛，不止是架构上，也涉及到工程、团队等方面的经验总结。

## 50条可扩展性规则

* 规则1 避免过度设计

产品的设计超出设计需求、完成的产品对于用户过度复杂、技术实现复杂到令他人难以理解都是过度设计的表现。复杂的系统实施成本高、维护困难，简单的系统容易扩展、可维护性强且成本低。

* 规则2 方案中包括扩展

在早期考虑到容量扩展的需求，但借助IaaS等服务可以在容量临近所需时再按需扩展。

* 规则3 三次简化方案

从方案的范围、设计和实施角度进行简化。

* 规则4 减少域名解析

对于性能敏感的网页，减少下载页面所需的域名解析次数。

* 规则5 减少页面目标

对于性能敏感的网页，减少网页上的对象数量和尽可能缩小对象大小。

* 规则6 采用同构网络

对于路由器和交换机，确保使用同一供应商的产品，可以减少可用性和可扩展性方面的问题。

![AKF立方体](images/AKF.png)

* 规则7 X轴扩展

AKF立方体中的X轴扩展，即水平扩展。通过复制服务或者数据库以分散事务负载。研发成本低，适用于业务发展初期，业务复杂度低，需要增加系统容量的场景。

* 规则8 Y轴拆分

AKF立方体中的Y轴扩展，将服务和数据按照动词/名词定义的边界进行拆分。研发成本中，适用于业务逐渐复杂，数据量逐渐增大，代码耦合度变高，团队规模较大时的场景。

* 规则9 Z轴拆分

AKF立方体中的Z轴扩展，即分片。将数据或者服务按照用户属性进行拆分。研发成本高，适用于用户数量按指数级快速增长的场景。

* 规则10 向外扩展

向外扩展（Scale Out）而不是向上扩展（Scale Up），使技术资源投入的成本随着业务复杂度而线性增加。

